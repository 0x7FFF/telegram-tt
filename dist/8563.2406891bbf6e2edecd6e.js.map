{"version":3,"file":"8563.2406891bbf6e2edecd6e.js","mappings":"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","sources":["webpack://telegram-t/./src/components/common/Avatar.tsx","webpack://telegram-t/./src/components/common/FakeIcon.tsx","webpack://telegram-t/./src/components/common/VerifiedIcon.tsx","webpack://telegram-t/./src/components/common/FullNameTitle.module.scss?6448","webpack://telegram-t/./src/components/common/FullNameTitle.tsx","webpack://telegram-t/./src/components/common/PremiumIcon.tsx","webpack://telegram-t/./src/components/right/DeleteMemberModal.tsx","webpack://telegram-t/./src/global/selectors/calls.ts","webpack://telegram-t/./src/global/selectors/limits.ts","webpack://telegram-t/./src/hooks/useContextMenuHandlers.ts","webpack://telegram-t/./src/hooks/useFastClick.ts","webpack://telegram-t/./src/hooks/useInfiniteScroll.ts","webpack://telegram-t/./src/hooks/useInterval.ts","webpack://telegram-t/./src/hooks/useLayoutEffectWithPrevDeps.ts","webpack://telegram-t/./src/hooks/useMenuPosition.ts","webpack://telegram-t/./src/util/directInputManager.ts","webpack://telegram-t/./src/util/resetScroll.ts","webpack://telegram-t/./src/util/trapFocus.ts"],"sourcesContent":["import type { MouseEvent as ReactMouseEvent } from 'react';\nimport React, {\n  memo, useRef,\n} from '../../lib/teact/teact';\n\nimport type { FC, TeactNode } from '../../lib/teact/teact';\nimport type {\n  ApiChat, ApiPhoto, ApiUser,\n} from '../../api/types';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\nimport { ApiMediaFormat } from '../../api/types';\n\nimport { IS_TEST } from '../../config';\nimport {\n  getChatAvatarHash,\n  getChatTitle,\n  getUserColorKey,\n  getUserFullName,\n  isUserId,\n  isChatWithRepliesBot,\n  isDeletedUser,\n} from '../../global/helpers';\nimport { getFirstLetters } from '../../util/textFormat';\nimport buildClassName, { createClassNameBuilder } from '../../util/buildClassName';\nimport renderText from './helpers/renderText';\n\nimport useMedia from '../../hooks/useMedia';\nimport useMediaTransition from '../../hooks/useMediaTransition';\nimport useLang from '../../hooks/useLang';\nimport { useFastClick } from '../../hooks/useFastClick';\nimport useLastCallback from '../../hooks/useLastCallback';\n\nimport OptimizedVideo from '../ui/OptimizedVideo';\n\nimport './Avatar.scss';\n\nconst LOOP_COUNT = 3;\n\nexport type AvatarSize = 'micro' | 'tiny' | 'mini' | 'small' | 'small-mobile' | 'medium' | 'large' | 'jumbo';\n\nconst cn = createClassNameBuilder('Avatar');\ncn.media = cn('media');\ncn.icon = cn('icon');\n\ntype OwnProps = {\n  className?: string;\n  size?: AvatarSize;\n  peer?: ApiChat | ApiUser;\n  photo?: ApiPhoto;\n  text?: string;\n  isSavedMessages?: boolean;\n  withVideo?: boolean;\n  loopIndefinitely?: boolean;\n  noPersonalPhoto?: boolean;\n  observeIntersection?: ObserveFn;\n  onClick?: (e: ReactMouseEvent<HTMLDivElement, MouseEvent>, hasMedia: boolean) => void;\n};\n\nconst Avatar: FC<OwnProps> = ({\n  className,\n  size = 'large',\n  peer,\n  photo,\n  text,\n  isSavedMessages,\n  withVideo,\n  loopIndefinitely,\n  noPersonalPhoto,\n  onClick,\n}) => {\n  // eslint-disable-next-line no-null/no-null\n  const ref = useRef<HTMLDivElement>(null);\n  const videoLoopCountRef = useRef(0);\n  const isPeerChat = peer && 'title' in peer;\n  const user = peer && !isPeerChat ? peer as ApiUser : undefined;\n  const chat = peer && isPeerChat ? peer as ApiChat : undefined;\n  const isDeleted = user && isDeletedUser(user);\n  const isReplies = peer && isChatWithRepliesBot(peer.id);\n  const isForum = chat?.isForum;\n  let imageHash: string | undefined;\n  let videoHash: string | undefined;\n\n  const shouldLoadVideo = withVideo && photo?.isVideo;\n\n  const shouldFetchBig = size === 'jumbo';\n  if (!isSavedMessages && !isDeleted) {\n    if ((user && !noPersonalPhoto) || chat) {\n      imageHash = getChatAvatarHash(peer!, shouldFetchBig ? 'big' : undefined);\n    } else if (photo) {\n      imageHash = `photo${photo.id}?size=m`;\n      if (photo.isVideo && withVideo) {\n        videoHash = `videoAvatar${photo.id}?size=u`;\n      }\n    }\n  }\n\n  const imgBlobUrl = useMedia(imageHash, false, ApiMediaFormat.BlobUrl);\n  const videoBlobUrl = useMedia(videoHash, !shouldLoadVideo, ApiMediaFormat.BlobUrl);\n  const hasBlobUrl = Boolean(imgBlobUrl || videoBlobUrl);\n  // `videoBlobUrl` can be taken from memory cache, so we need to check `shouldLoadVideo` again\n  const shouldPlayVideo = Boolean(videoBlobUrl && shouldLoadVideo);\n\n  const transitionClassNames = useMediaTransition(hasBlobUrl);\n\n  const handleVideoEnded = useLastCallback((e) => {\n    const video = e.currentTarget;\n    if (!videoBlobUrl) return;\n\n    if (loopIndefinitely) return;\n\n    videoLoopCountRef.current += 1;\n    if (videoLoopCountRef.current >= LOOP_COUNT) {\n      video.style.display = 'none';\n    }\n  });\n\n  const lang = useLang();\n\n  let content: TeactNode | undefined;\n  const author = user ? getUserFullName(user) : (chat ? getChatTitle(lang, chat) : text);\n\n  if (isSavedMessages) {\n    content = (\n      <i\n        className={buildClassName(\n          cn.icon,\n          'icon',\n          'icon-avatar-saved-messages',\n        )}\n        role=\"img\"\n        aria-label={author}\n      />\n    );\n  } else if (isDeleted) {\n    content = (\n      <i\n        className={buildClassName(\n          cn.icon,\n          'icon',\n          'icon-avatar-deleted-account',\n        )}\n        role=\"img\"\n        aria-label={author}\n      />\n    );\n  } else if (isReplies) {\n    content = (\n      <i\n        className={buildClassName(\n          cn.icon,\n          'icon',\n          'icon-reply-filled',\n        )}\n        role=\"img\"\n        aria-label={author}\n      />\n    );\n  } else if (hasBlobUrl) {\n    content = (\n      <>\n        <img\n          src={imgBlobUrl}\n          className={buildClassName(cn.media, 'avatar-media', transitionClassNames, videoBlobUrl && 'poster')}\n          alt={author}\n          decoding=\"async\"\n        />\n        {shouldPlayVideo && (\n          <OptimizedVideo\n            canPlay\n            src={videoBlobUrl}\n            className={buildClassName(cn.media, 'avatar-media', 'poster')}\n            muted\n            loop={loopIndefinitely}\n            autoPlay\n            disablePictureInPicture\n            playsInline\n            onEnded={handleVideoEnded}\n          />\n        )}\n      </>\n    );\n  } else if (user) {\n    const userFullName = getUserFullName(user);\n    content = userFullName ? getFirstLetters(userFullName, 2) : undefined;\n  } else if (chat) {\n    const title = getChatTitle(lang, chat);\n    content = title && getFirstLetters(title, isUserId(chat.id) ? 2 : 1);\n  } else if (text) {\n    content = getFirstLetters(text, 2);\n  }\n\n  const fullClassName = buildClassName(\n    `Avatar size-${size}`,\n    className,\n    `color-bg-${getUserColorKey(peer)}`,\n    isSavedMessages && 'saved-messages',\n    isDeleted && 'deleted-account',\n    isReplies && 'replies-bot-account',\n    isForum && 'forum',\n    onClick && 'interactive',\n    (!isSavedMessages && !imgBlobUrl) && 'no-photo',\n  );\n\n  const hasMedia = Boolean(isSavedMessages || imgBlobUrl);\n\n  const { handleClick, handleMouseDown } = useFastClick((e: ReactMouseEvent<HTMLDivElement, MouseEvent>) => {\n    if (onClick) {\n      onClick(e, hasMedia);\n    }\n  });\n\n  return (\n    <div\n      ref={ref}\n      className={fullClassName}\n      data-test-sender-id={IS_TEST ? peer?.id : undefined}\n      aria-label={typeof content === 'string' ? author : undefined}\n      onClick={handleClick}\n      onMouseDown={handleMouseDown}\n    >\n      {typeof content === 'string' ? renderText(content, [size === 'jumbo' ? 'hq_emoji' : 'emoji']) : content}\n    </div>\n  );\n};\n\nexport default memo(Avatar);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiFakeType } from '../../api/types';\n\nimport useLang from '../../hooks/useLang';\n\nimport './FakeIcon.scss';\n\ntype OwnProps = {\n  fakeType: ApiFakeType;\n};\n\nconst FakeIcon: FC<OwnProps> = ({\n  fakeType,\n}) => {\n  const lang = useLang();\n\n  return (\n    <span className=\"FakeIcon\">\n      {lang(fakeType === 'fake' ? 'FakeMessage' : 'ScamMessage')}\n    </span>\n  );\n};\n\nexport default memo(FakeIcon);\n","import type { FC } from '../../lib/teact/teact';\nimport React from '../../lib/teact/teact';\n\nimport './VerifiedIcon.scss';\n\n// eslint-disable-next-line max-len\nconst VERIFIED_ICON = { __html: '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><path d=\"M12.3 2.9c.1.1.2.1.3.2.7.6 1.3 1.1 2 1.7.3.2.6.4.9.4.9.1 1.7.2 2.6.2.5 0 .6.1.7.7.1.9.1 1.8.2 2.6 0 .4.2.7.4 1 .6.7 1.1 1.3 1.7 2 .3.4.3.5 0 .8-.5.6-1.1 1.3-1.6 1.9-.3.3-.5.7-.5 1.2-.1.8-.2 1.7-.2 2.5 0 .4-.2.5-.6.6-.8 0-1.6.1-2.5.2-.5 0-1 .2-1.4.5-.6.5-1.3 1.1-1.9 1.6-.3.3-.5.3-.8 0-.7-.6-1.4-1.2-2-1.8-.3-.2-.6-.4-.9-.4-.9-.1-1.8-.2-2.7-.2-.4 0-.5-.2-.6-.5 0-.9-.1-1.7-.2-2.6 0-.4-.2-.8-.4-1.1-.6-.6-1.1-1.3-1.6-2-.4-.4-.3-.5 0-1 .6-.6 1.1-1.3 1.7-1.9.3-.3.4-.6.4-1 0-.8.1-1.6.2-2.5 0-.5.1-.6.6-.6.9-.1 1.7-.1 2.6-.2.4 0 .7-.2 1-.4.7-.6 1.4-1.2 2.1-1.7.1-.2.3-.3.5-.2z\" style=\"fill: var(--color-fill)\"/><path class=\"lol\" d=\"M16.4 10.1l-.2.2-5.4 5.4c-.1.1-.2.2-.4 0l-2.6-2.6c-.2-.2-.1-.3 0-.4.2-.2.5-.6.7-.6.3 0 .5.4.7.6l1.1 1.1c.2.2.3.2.5 0l4.3-4.3c.2-.2.4-.3.6 0 .1.2.3.3.4.5.2 0 .3.1.3.1z\" style=\"fill: var(--color-checkmark)\"/></svg>' };\n\nconst VerifiedIcon: FC = () => {\n  return (\n    // eslint-disable-next-line react/no-danger\n    <span className=\"VerifiedIcon\" dangerouslySetInnerHTML={VERIFIED_ICON} />\n  );\n};\n\nexport default VerifiedIcon;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"ysHMmXALnn0fgFRc7Bn7\"};","import React, { memo } from '../../lib/teact/teact';\n\nimport type { ApiChat, ApiUser } from '../../api/types';\nimport type { FC } from '../../lib/teact/teact';\nimport type { ObserveFn } from '../../hooks/useIntersectionObserver';\n\nimport { EMOJI_STATUS_LOOP_LIMIT } from '../../config';\nimport renderText from './helpers/renderText';\nimport { getChatTitle, getUserFullName, isUserId } from '../../global/helpers';\nimport buildClassName from '../../util/buildClassName';\n\nimport useLang from '../../hooks/useLang';\n\nimport VerifiedIcon from './VerifiedIcon';\nimport FakeIcon from './FakeIcon';\nimport CustomEmoji from './CustomEmoji';\nimport PremiumIcon from './PremiumIcon';\n\nimport styles from './FullNameTitle.module.scss';\n\ntype OwnProps = {\n  peer: ApiChat | ApiUser;\n  className?: string;\n  noVerified?: boolean;\n  noFake?: boolean;\n  withEmojiStatus?: boolean;\n  emojiStatusSize?: number;\n  isSavedMessages?: boolean;\n  noLoopLimit?: boolean;\n  onEmojiStatusClick?: NoneToVoidFunction;\n  observeIntersection?: ObserveFn;\n};\n\nconst FullNameTitle: FC<OwnProps> = ({\n  className,\n  peer,\n  noVerified,\n  noFake,\n  withEmojiStatus,\n  emojiStatusSize,\n  isSavedMessages,\n  noLoopLimit,\n  onEmojiStatusClick,\n  observeIntersection,\n}) => {\n  const lang = useLang();\n  const isUser = isUserId(peer.id);\n  const title = isUser ? getUserFullName(peer as ApiUser) : getChatTitle(lang, peer as ApiChat);\n  const emojiStatus = isUser && (peer as ApiUser).emojiStatus;\n  const isPremium = isUser && (peer as ApiUser).isPremium;\n\n  if (isSavedMessages) {\n    return (\n      <div className={buildClassName('title', styles.root, className)}>\n        <h3>{lang('SavedMessages')}</h3>\n      </div>\n    );\n  }\n\n  return (\n    <div className={buildClassName('title', styles.root, className)}>\n      <h3 dir=\"auto\" className=\"fullName\">{renderText(title || '')}</h3>\n      {!noVerified && peer.isVerified && <VerifiedIcon />}\n      {!noFake && peer.fakeType && <FakeIcon fakeType={peer.fakeType} />}\n      {withEmojiStatus && emojiStatus && (\n        <CustomEmoji\n          documentId={emojiStatus.documentId}\n          size={emojiStatusSize}\n          loopLimit={!noLoopLimit ? EMOJI_STATUS_LOOP_LIMIT : undefined}\n          observeIntersectionForLoading={observeIntersection}\n          onClick={onEmojiStatusClick}\n        />\n      )}\n      {withEmojiStatus && !emojiStatus && isPremium && <PremiumIcon />}\n    </div>\n  );\n};\n\nexport default memo(FullNameTitle);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { memo, useMemo } from '../../lib/teact/teact';\n\nimport generateUniqueId from '../../util/generateUniqueId';\n\nimport buildClassName from '../../util/buildClassName';\n\nimport './PremiumIcon.scss';\n\n// eslint-disable-next-line max-len\nconst PREMIUM_ICON = { __html: '<svg width=\"14\" height=\"15\" viewBox=\"0 0 14 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6.63869 12.1902L3.50621 14.1092C3.18049 14.3087 2.75468 14.2064 2.55515 13.8807C2.45769 13.7216 2.42864 13.5299 2.47457 13.3491L2.95948 11.4405C3.13452 10.7515 3.60599 10.1756 4.24682 9.86791L7.6642 8.22716C7.82352 8.15067 7.89067 7.95951 7.81418 7.80019C7.75223 7.67116 7.61214 7.59896 7.47111 7.62338L3.66713 8.28194C2.89387 8.41581 2.1009 8.20228 1.49941 7.69823L0.297703 6.69116C0.00493565 6.44581 -0.0335059 6.00958 0.211842 5.71682C0.33117 5.57442 0.502766 5.48602 0.687982 5.47153L4.35956 5.18419C4.61895 5.16389 4.845 4.99974 4.94458 4.75937L6.36101 1.3402C6.5072 0.987302 6.91179 0.819734 7.26469 0.965925C7.43413 1.03612 7.56876 1.17075 7.63896 1.3402L9.05539 4.75937C9.15496 4.99974 9.38101 5.16389 9.6404 5.18419L13.3322 5.47311C13.713 5.50291 13.9975 5.83578 13.9677 6.2166C13.9534 6.39979 13.8667 6.56975 13.7269 6.68896L10.9114 9.08928C10.7131 9.25826 10.6267 9.52425 10.6876 9.77748L11.5532 13.3733C11.6426 13.7447 11.414 14.1182 11.0427 14.2076C10.8642 14.2506 10.676 14.2208 10.5195 14.1249L7.36128 12.1902C7.13956 12.0544 6.8604 12.0544 6.63869 12.1902Z\" fill=\"var(--color-fill)\"/></svg>' };\n\ntype OwnProps = {\n  withGradient?: boolean;\n  big?: boolean;\n  className?: string;\n  onClick?: VoidFunction;\n};\n\nconst PremiumIcon: FC<OwnProps> = ({\n  withGradient,\n  big,\n  className,\n  onClick,\n}) => {\n  const html = useMemo(() => {\n    return withGradient ? getPremiumIconGradient() : PREMIUM_ICON;\n  }, [withGradient]);\n\n  return (\n    <i\n      onClick={onClick}\n      className={buildClassName(\n        'PremiumIcon', className, withGradient && 'gradient', onClick && 'clickable', big && 'big',\n      )}\n      dangerouslySetInnerHTML={html}\n      title=\"Premium\"\n    />\n  );\n};\n\nfunction getPremiumIconGradient() {\n  const id = generateUniqueId();\n  return {\n    // eslint-disable-next-line max-len\n    __html: `<svg width=\"14\" height=\"15\" viewBox=\"0 0 14 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><defs><linearGradient id=\"${id}\" x1=\"3\" y1=\"63.5001\" x2=\"84.1475\" y2=\"-1.32262\" gradientUnits=\"userSpaceOnUse\"><stop stop-color=\"#6B93FF\"/><stop offset=\"0.439058\" stop-color=\"#976FFF\"/><stop offset=\"1\" stop-color=\"#E46ACE\"/></linearGradient></defs><path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6.63869 12.1902L3.50621 14.1092C3.18049 14.3087 2.75468 14.2064 2.55515 13.8807C2.45769 13.7216 2.42864 13.5299 2.47457 13.3491L2.95948 11.4405C3.13452 10.7515 3.60599 10.1756 4.24682 9.86791L7.6642 8.22716C7.82352 8.15067 7.89067 7.95951 7.81418 7.80019C7.75223 7.67116 7.61214 7.59896 7.47111 7.62338L3.66713 8.28194C2.89387 8.41581 2.1009 8.20228 1.49941 7.69823L0.297703 6.69116C0.00493565 6.44581 -0.0335059 6.00958 0.211842 5.71682C0.33117 5.57442 0.502766 5.48602 0.687982 5.47153L4.35956 5.18419C4.61895 5.16389 4.845 4.99974 4.94458 4.75937L6.36101 1.3402C6.5072 0.987302 6.91179 0.819734 7.26469 0.965925C7.43413 1.03612 7.56876 1.17075 7.63896 1.3402L9.05539 4.75937C9.15496 4.99974 9.38101 5.16389 9.6404 5.18419L13.3322 5.47311C13.713 5.50291 13.9975 5.83578 13.9677 6.2166C13.9534 6.39979 13.8667 6.56975 13.7269 6.68896L10.9114 9.08928C10.7131 9.25826 10.6267 9.52425 10.6876 9.77748L11.5532 13.3733C11.6426 13.7447 11.414 14.1182 11.0427 14.2076C10.8642 14.2506 10.676 14.2208 10.5195 14.1249L7.36128 12.1902C7.13956 12.0544 6.8604 12.0544 6.63869 12.1902Z\" fill=\"url(#${id})\"/></svg>`,\n  };\n}\n\nexport default memo(PremiumIcon);\n","import type { FC } from '../../lib/teact/teact';\nimport React, { useCallback, memo } from '../../lib/teact/teact';\nimport { getActions, withGlobal } from '../../global';\n\nimport type { ApiChat } from '../../api/types';\n\nimport { selectCurrentChat, selectUser } from '../../global/selectors';\nimport { getUserFirstOrLastName } from '../../global/helpers';\nimport renderText from '../common/helpers/renderText';\nimport useLang from '../../hooks/useLang';\n\nimport ConfirmDialog from '../ui/ConfirmDialog';\n\nexport type OwnProps = {\n  isOpen: boolean;\n  userId?: string;\n  onClose: () => void;\n};\n\ntype StateProps = {\n  chat?: ApiChat;\n  contactName?: string;\n};\n\nconst DeleteMemberModal: FC<OwnProps & StateProps> = ({\n  isOpen,\n  chat,\n  userId,\n  contactName,\n  onClose,\n}) => {\n  const { deleteChatMember } = getActions();\n\n  const lang = useLang();\n\n  const handleDeleteChatMember = useCallback(() => {\n    deleteChatMember({ chatId: chat!.id, userId: userId! });\n    onClose();\n  }, [chat, deleteChatMember, onClose, userId]);\n\n  if (!chat || !userId) {\n    return undefined;\n  }\n\n  return (\n    <ConfirmDialog\n      isOpen={isOpen}\n      onClose={onClose}\n      title={lang('GroupRemoved.Remove')}\n      textParts={renderText(lang('PeerInfo.Confirm.RemovePeer', contactName))}\n      confirmLabel={lang('lng_box_remove')}\n      confirmHandler={handleDeleteChatMember}\n      confirmIsDestructive\n    />\n  );\n};\n\nexport default memo(withGlobal<OwnProps>(\n  (global, { userId }): StateProps => {\n    const chat = selectCurrentChat(global);\n    const user = userId && selectUser(global, userId);\n    const contactName = user ? getUserFirstOrLastName(user) : undefined;\n\n    return {\n      chat,\n      contactName,\n    };\n  },\n)(DeleteMemberModal));\n","import type { GlobalState } from '../types';\nimport { selectChat, selectChatFullInfo } from './chats';\nimport { getMainUsername, isChatBasicGroup } from '../helpers';\nimport { selectUser } from './users';\n\nexport function selectChatGroupCall<T extends GlobalState>(global: T, chatId: string) {\n  const fullInfo = selectChatFullInfo(global, chatId);\n  if (!fullInfo || !fullInfo.groupCallId) return undefined;\n\n  return selectGroupCall(global, fullInfo.groupCallId);\n}\n\nexport function selectGroupCall<T extends GlobalState>(global: T, groupCallId: string) {\n  return global.groupCalls.byId[groupCallId];\n}\n\nexport function selectGroupCallParticipant<T extends GlobalState>(\n  global: T, groupCallId: string, participantId: string,\n) {\n  return selectGroupCall(global, groupCallId)?.participants[participantId];\n}\n\nexport function selectIsAdminInActiveGroupCall<T extends GlobalState>(global: T): boolean {\n  const chatId = selectActiveGroupCall(global)?.chatId;\n\n  if (!chatId) return false;\n\n  const chat = selectChat(global, chatId);\n  if (!chat) return false;\n\n  return (isChatBasicGroup(chat) && chat.isCreator) || Boolean(chat.adminRights?.manageCall);\n}\n\nexport function selectActiveGroupCall<T extends GlobalState>(global: T) {\n  const { groupCalls: { activeGroupCallId } } = global;\n  if (!activeGroupCallId) {\n    return undefined;\n  }\n\n  return selectGroupCall(global, activeGroupCallId);\n}\n\nexport function selectPhoneCallUser<T extends GlobalState>(global: T) {\n  const { phoneCall, currentUserId } = global;\n  if (!phoneCall || !phoneCall.participantId || !phoneCall.adminId) {\n    return undefined;\n  }\n\n  const id = phoneCall.adminId === currentUserId ? phoneCall.participantId : phoneCall.adminId;\n  return selectUser(global, id);\n}\n\nexport function selectCanInviteToActiveGroupCall<T extends GlobalState>(global: T) {\n  const groupCall = selectActiveGroupCall(global);\n\n  if (!groupCall || !groupCall.chatId) {\n    return false;\n  }\n\n  const chat = selectChat(global, groupCall.chatId);\n  if (!chat) {\n    return false;\n  }\n\n  const hasPublicUsername = Boolean(getMainUsername(chat));\n  if (hasPublicUsername) {\n    return true;\n  }\n\n  const inviteLink = selectChatFullInfo(global, chat.id)?.inviteLink;\n  return Boolean(inviteLink);\n}\n","import type { ApiLimitType, GlobalState } from '../types';\nimport { selectIsCurrentUserPremium } from './users';\nimport { DEFAULT_LIMITS } from '../../config';\n\nexport function selectCurrentLimit<T extends GlobalState>(global: T, limit: ApiLimitType) {\n  const { appConfig } = global;\n  if (!appConfig) {\n    return DEFAULT_LIMITS[limit][0];\n  }\n\n  const isPremium = selectIsCurrentUserPremium(global);\n  const { limits } = appConfig;\n\n  // When there are new limits when updating a layer, until we get a new configuration, we must use the default values\n  const value = limits[limit]?.[isPremium ? 1 : 0] ?? DEFAULT_LIMITS[limit][isPremium ? 1 : 0];\n  if (limit === 'dialogFilters') return value + 1; // Server does not count \"All\" as folder, but we need to\n  return value;\n}\n\nexport function selectPremiumLimit<T extends GlobalState>(global: T, limit: ApiLimitType) {\n  const { appConfig } = global;\n  if (!appConfig) return DEFAULT_LIMITS[limit][1];\n\n  const { limits } = appConfig;\n\n  return limits[limit][1];\n}\n","import type { RefObject } from 'react';\nimport { useState, useEffect } from '../lib/teact/teact';\nimport { addExtraClass, removeExtraClass } from '../lib/teact/teact-dom';\nimport { requestMutation } from '../lib/fasterdom/fasterdom';\n\nimport type { IAnchorPosition } from '../types';\nimport {\n  IS_TOUCH_ENV, IS_PWA, IS_IOS,\n} from '../util/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\nconst LONG_TAP_DURATION_MS = 200;\nconst IOS_PWA_CONTEXT_MENU_DELAY_MS = 100;\n\nfunction stopEvent(e: Event) {\n  e.stopImmediatePropagation();\n  e.preventDefault();\n  e.stopPropagation();\n}\n\nconst useContextMenuHandlers = (\n  elementRef: RefObject<HTMLElement>,\n  isMenuDisabled?: boolean,\n  shouldDisableOnLink?: boolean,\n  shouldDisableOnLongTap?: boolean,\n) => {\n  const [isContextMenuOpen, setIsContextMenuOpen] = useState(false);\n  const [contextMenuPosition, setContextMenuPosition] = useState<IAnchorPosition | undefined>(undefined);\n  const [contextMenuTarget, setContextMenuTarget] = useState<HTMLElement | undefined>(undefined);\n\n  const handleBeforeContextMenu = useLastCallback((e: React.MouseEvent) => {\n    if (!isMenuDisabled && e.button === 2) {\n      requestMutation(() => {\n        addExtraClass(e.target as HTMLElement, 'no-selection');\n      });\n    }\n  });\n\n  const handleContextMenu = useLastCallback((e: React.MouseEvent) => {\n    requestMutation(() => {\n      removeExtraClass(e.target as HTMLElement, 'no-selection');\n    });\n\n    if (isMenuDisabled || (shouldDisableOnLink && (e.target as HTMLElement).matches('a[href]'))) {\n      return;\n    }\n    e.preventDefault();\n\n    if (contextMenuPosition) {\n      return;\n    }\n\n    setIsContextMenuOpen(true);\n    setContextMenuPosition({ x: e.clientX, y: e.clientY });\n    setContextMenuTarget(e.target as HTMLElement);\n  });\n\n  const handleContextMenuClose = useLastCallback(() => {\n    setIsContextMenuOpen(false);\n  });\n\n  const handleContextMenuHide = useLastCallback(() => {\n    setContextMenuPosition(undefined);\n  });\n\n  // Support context menu on touch devices\n  useEffect(() => {\n    if (isMenuDisabled || !IS_TOUCH_ENV || shouldDisableOnLongTap) {\n      return undefined;\n    }\n\n    const element = elementRef.current;\n    if (!element) {\n      return undefined;\n    }\n\n    let timer: number | undefined;\n\n    const clearLongPressTimer = () => {\n      if (timer) {\n        clearTimeout(timer);\n        timer = undefined;\n      }\n    };\n\n    const emulateContextMenuEvent = (originalEvent: TouchEvent) => {\n      clearLongPressTimer();\n\n      const { clientX, clientY, target } = originalEvent.touches[0];\n\n      if (contextMenuPosition || (shouldDisableOnLink && (target as HTMLElement).matches('a[href]'))) {\n        return;\n      }\n\n      // Temporarily intercept and clear the next click\n      element.addEventListener('touchend', (e) => {\n        // On iOS in PWA mode, the context menu may cause click-through to the element in the menu upon opening\n        if (IS_IOS && IS_PWA) {\n          setTimeout(() => {\n            element.removeEventListener('mousedown', stopEvent, {\n              capture: true,\n            });\n            element.removeEventListener('click', stopEvent, {\n              capture: true,\n            });\n          }, IOS_PWA_CONTEXT_MENU_DELAY_MS);\n        }\n        stopEvent(e);\n      }, {\n        once: true,\n        capture: true,\n      });\n\n      // On iOS15, in PWA mode, the context menu immediately closes after opening\n      if (IS_PWA && IS_IOS) {\n        element.addEventListener('mousedown', stopEvent, {\n          once: true,\n          capture: true,\n        });\n        element.addEventListener('click', stopEvent, {\n          once: true,\n          capture: true,\n        });\n      }\n\n      setIsContextMenuOpen(true);\n      setContextMenuPosition({ x: clientX, y: clientY });\n    };\n\n    const startLongPressTimer = (e: TouchEvent) => {\n      if (isMenuDisabled) {\n        return;\n      }\n      clearLongPressTimer();\n\n      timer = window.setTimeout(() => emulateContextMenuEvent(e), LONG_TAP_DURATION_MS);\n    };\n\n    // @perf Consider event delegation\n    element.addEventListener('touchstart', startLongPressTimer, { passive: true });\n    element.addEventListener('touchcancel', clearLongPressTimer, true);\n    element.addEventListener('touchend', clearLongPressTimer, true);\n    element.addEventListener('touchmove', clearLongPressTimer, { passive: true });\n\n    return () => {\n      clearLongPressTimer();\n      element.removeEventListener('touchstart', startLongPressTimer);\n      element.removeEventListener('touchcancel', clearLongPressTimer, true);\n      element.removeEventListener('touchend', clearLongPressTimer, true);\n      element.removeEventListener('touchmove', clearLongPressTimer);\n    };\n  }, [contextMenuPosition, isMenuDisabled, shouldDisableOnLongTap, elementRef, shouldDisableOnLink]);\n\n  return {\n    isContextMenuOpen,\n    contextMenuPosition,\n    contextMenuTarget,\n    handleBeforeContextMenu,\n    handleContextMenu,\n    handleContextMenuClose,\n    handleContextMenuHide,\n  };\n};\n\nexport default useContextMenuHandlers;\n","import type React from '../lib/teact/teact';\n\nimport { IS_TOUCH_ENV, MouseButton } from '../util/windowEnvironment';\nimport useLastCallback from './useLastCallback';\n\ntype EventArg<E> = React.MouseEvent<E>;\ntype EventHandler<E> = (e: EventArg<E>) => void;\n\nexport function useFastClick<T extends HTMLDivElement | HTMLButtonElement>(callback?: EventHandler<T>) {\n  const handler = useLastCallback((e: EventArg<T>) => {\n    if (e.type === 'mousedown' && e.button !== MouseButton.Main) {\n      return;\n    }\n\n    callback!(e);\n  });\n\n  return IS_TOUCH_ENV\n    ? { handleClick: callback ? handler : undefined }\n    : { handleMouseDown: callback ? handler : undefined };\n}\n","import { useRef } from '../lib/teact/teact';\nimport { LoadMoreDirection } from '../types';\n\nimport { areSortedArraysEqual } from '../util/iteratees';\n\nimport useLastCallback from './useLastCallback';\nimport useForceUpdate from './useForceUpdate';\nimport usePrevious from './usePrevious';\n\ntype GetMore = (args: { direction: LoadMoreDirection }) => void;\ntype LoadMoreBackwards = (args: { offsetId?: string | number }) => void;\n\nconst DEFAULT_LIST_SLICE = 30;\n\nconst useInfiniteScroll = <ListId extends string | number>(\n  loadMoreBackwards?: LoadMoreBackwards,\n  listIds?: ListId[],\n  isDisabled = false,\n  listSlice = DEFAULT_LIST_SLICE,\n): [ListId[]?, GetMore?] => {\n  const requestParamsRef = useRef<{\n    direction?: LoadMoreDirection;\n    offsetId?: ListId;\n  }>();\n\n  const currentStateRef = useRef<{ viewportIds: ListId[]; isOnTop: boolean } | undefined>();\n  if (!currentStateRef.current && listIds && !isDisabled) {\n    const {\n      newViewportIds,\n      newIsOnTop,\n    } = getViewportSlice(listIds, LoadMoreDirection.Forwards, listSlice, listIds[0]);\n    currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n  }\n\n  const forceUpdate = useForceUpdate();\n\n  if (isDisabled) {\n    requestParamsRef.current = {};\n  }\n\n  const prevListIds = usePrevious(listIds);\n  const prevIsDisabled = usePrevious(isDisabled);\n  if (listIds && !isDisabled && (listIds !== prevListIds || isDisabled !== prevIsDisabled)) {\n    const { viewportIds, isOnTop } = currentStateRef.current || {};\n    const currentMiddleId = viewportIds && !isOnTop ? viewportIds[Math.round(viewportIds.length / 2)] : undefined;\n    const defaultOffsetId = currentMiddleId && listIds.includes(currentMiddleId) ? currentMiddleId : listIds[0];\n    const { offsetId = defaultOffsetId, direction = LoadMoreDirection.Forwards } = requestParamsRef.current || {};\n    const { newViewportIds, newIsOnTop } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    requestParamsRef.current = {};\n\n    if (!viewportIds || !areSortedArraysEqual(viewportIds, newViewportIds)) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n    }\n  } else if (!listIds) {\n    currentStateRef.current = undefined;\n  }\n\n  const getMore: GetMore = useLastCallback(({\n    direction,\n    noScroll,\n  }: { direction: LoadMoreDirection; noScroll?: boolean }) => {\n    const { viewportIds } = currentStateRef.current || {};\n\n    const offsetId = viewportIds\n      ? direction === LoadMoreDirection.Backwards ? viewportIds[viewportIds.length - 1] : viewportIds[0]\n      : undefined;\n\n    if (!listIds) {\n      if (loadMoreBackwards) {\n        loadMoreBackwards({ offsetId });\n      }\n\n      return;\n    }\n\n    const {\n      newViewportIds, areSomeLocal, areAllLocal, newIsOnTop,\n    } = getViewportSlice(listIds, direction, listSlice, offsetId);\n\n    if (areSomeLocal && !(viewportIds && areSortedArraysEqual(viewportIds, newViewportIds))) {\n      currentStateRef.current = { viewportIds: newViewportIds, isOnTop: newIsOnTop };\n      forceUpdate();\n    }\n\n    if (!areAllLocal && loadMoreBackwards) {\n      if (!noScroll) {\n        requestParamsRef.current = { ...requestParamsRef.current, direction, offsetId };\n      }\n\n      loadMoreBackwards({ offsetId });\n    }\n  });\n\n  return isDisabled ? [listIds] : [currentStateRef.current?.viewportIds, getMore];\n};\n\nfunction getViewportSlice<ListId extends string | number>(\n  sourceIds: ListId[],\n  direction: LoadMoreDirection,\n  listSlice: number,\n  offsetId?: ListId,\n) {\n  const { length } = sourceIds;\n  const index = offsetId ? sourceIds.indexOf(offsetId) : 0;\n  const isForwards = direction === LoadMoreDirection.Forwards;\n  const indexForDirection = isForwards ? index : (index + 1) || length;\n  const from = Math.max(0, indexForDirection - listSlice);\n  const to = indexForDirection + listSlice - 1;\n  const newViewportIds = sourceIds.slice(Math.max(0, from), to + 1);\n\n  let areSomeLocal;\n  let areAllLocal;\n  switch (direction) {\n    case LoadMoreDirection.Forwards:\n      areSomeLocal = indexForDirection >= 0;\n      areAllLocal = from >= 0;\n      break;\n    case LoadMoreDirection.Backwards:\n      areSomeLocal = indexForDirection < length;\n      areAllLocal = to <= length - 1;\n      break;\n  }\n\n  return {\n    newViewportIds,\n    areSomeLocal,\n    areAllLocal,\n    newIsOnTop: newViewportIds[0] === sourceIds[0],\n  };\n}\n\nexport default useInfiniteScroll;\n","import { useEffect, useLayoutEffect, useRef } from '../lib/teact/teact';\n\nfunction useInterval(callback: NoneToVoidFunction, delay?: number, noFirst = false) {\n  const savedCallback = useRef(callback);\n\n  useLayoutEffect(() => {\n    savedCallback.current = callback;\n  }, [callback]);\n\n  useEffect(() => {\n    if (delay === undefined) {\n      return undefined;\n    }\n\n    const id = setInterval(() => savedCallback.current(), delay);\n    if (!noFirst) savedCallback.current();\n\n    return () => clearInterval(id);\n  }, [delay, noFirst]);\n}\n\nexport default useInterval;\n","import { useLayoutEffect, useRef } from '../lib/teact/teact';\n\nconst useLayoutEffectWithPrevDeps = <const T extends readonly any[]>(\n  cb: (args: T | readonly []) => void, dependencies: T, debugKey?: string,\n) => {\n  const prevDepsRef = useRef<T>();\n\n  return useLayoutEffect(() => {\n    const prevDeps = prevDepsRef.current;\n    prevDepsRef.current = dependencies;\n\n    return cb(prevDeps || []);\n    // eslint-disable-next-line react-hooks-static-deps/exhaustive-deps\n  }, dependencies, debugKey);\n};\n\nexport default useLayoutEffectWithPrevDeps;\n","import { useState, useEffect } from '../lib/teact/teact';\nimport type { IAnchorPosition } from '../types';\n\ninterface Layout {\n  extraPaddingX?: number;\n  extraTopPadding?: number;\n  marginSides?: number;\n  extraMarginTop?: number;\n  menuElMinWidth?: number;\n  shouldAvoidNegativePosition?: boolean;\n  withPortal?: boolean;\n  isDense?: boolean; //  Allows you to place the menu as close to the edges of the area as possible\n}\n\nconst MENU_POSITION_VISUAL_COMFORT_SPACE_PX = 16;\nconst MENU_POSITION_BOTTOM_MARGIN = 12;\nconst EMPTY_RECT = {\n  width: 0, left: 0, height: 0, top: 0,\n};\n\nexport default function useMenuPosition(\n  anchor: IAnchorPosition | undefined,\n  getTriggerElement: () => HTMLElement | null,\n  getRootElement: () => HTMLElement | null,\n  getMenuElement: () => HTMLElement | null,\n  getLayout?: () => Layout,\n) {\n  const [positionX, setPositionX] = useState<'right' | 'left'>('right');\n  const [positionY, setPositionY] = useState<'top' | 'bottom'>('bottom');\n  const [transformOriginX, setTransformOriginX] = useState<number>();\n  const [transformOriginY, setTransformOriginY] = useState<number>();\n  const [withScroll, setWithScroll] = useState(false);\n  const [style, setStyle] = useState('');\n  const [menuStyle, setMenuStyle] = useState('opacity: 0;');\n\n  useEffect(() => {\n    const triggerEl = getTriggerElement();\n    if (!anchor || !triggerEl) {\n      return;\n    }\n\n    let { x, y } = anchor;\n    const anchorX = x;\n    const anchorY = y;\n\n    const menuEl = getMenuElement();\n    const rootEl = getRootElement();\n\n    const {\n      extraPaddingX = 0,\n      extraTopPadding = 0,\n      marginSides = 0,\n      extraMarginTop = 0,\n      menuElMinWidth = 0,\n      shouldAvoidNegativePosition = false,\n      withPortal = false,\n      isDense = false,\n    } = getLayout?.() || {};\n\n    const marginTop = menuEl ? parseInt(getComputedStyle(menuEl).marginTop, 10) + extraMarginTop : undefined;\n\n    const { offsetWidth: menuElWidth, offsetHeight: menuElHeight } = menuEl || { offsetWidth: 0, offsetHeight: 0 };\n    const menuRect = menuEl ? {\n      width: Math.max(menuElWidth, menuElMinWidth),\n      height: menuElHeight + marginTop!,\n    } : EMPTY_RECT;\n\n    const rootRect = rootEl ? rootEl.getBoundingClientRect() : EMPTY_RECT;\n\n    let horizontalPosition: 'left' | 'right';\n    let verticalPosition: 'top' | 'bottom';\n    if (isDense || (x + menuRect.width + extraPaddingX < rootRect.width + rootRect.left)) {\n      x += 3;\n      horizontalPosition = 'left';\n    } else if (x - menuRect.width - rootRect.left > 0) {\n      horizontalPosition = 'right';\n      x -= 3;\n    } else {\n      horizontalPosition = 'left';\n      x = 16;\n    }\n    setPositionX(horizontalPosition);\n\n    if (marginSides\n      && horizontalPosition === 'right' && (x + extraPaddingX + marginSides >= rootRect.width + rootRect.left)) {\n      x -= marginSides;\n    }\n\n    if (marginSides && horizontalPosition === 'left') {\n      if (x + extraPaddingX + marginSides + menuRect.width >= rootRect.width + rootRect.left) {\n        x -= marginSides;\n      } else if (x - marginSides <= 0) {\n        x += marginSides;\n      }\n    }\n\n    if (isDense || (y + menuRect.height < rootRect.height + rootRect.top)) {\n      verticalPosition = 'top';\n    } else {\n      verticalPosition = 'bottom';\n\n      if (y - menuRect.height < rootRect.top + extraTopPadding) {\n        y = rootRect.top + rootRect.height;\n      }\n    }\n    setPositionY(verticalPosition);\n\n    const triggerRect = triggerEl.getBoundingClientRect();\n\n    const addedYForPortalPositioning = (withPortal ? triggerRect.top : 0);\n    const addedXForPortalPositioning = (withPortal ? triggerRect.left : 0);\n\n    const leftWithPossibleNegative = Math.min(\n      x - triggerRect.left,\n      rootRect.width - menuRect.width - MENU_POSITION_VISUAL_COMFORT_SPACE_PX,\n    );\n    let left = (horizontalPosition === 'left'\n      ? (withPortal || shouldAvoidNegativePosition\n        ? Math.max(MENU_POSITION_VISUAL_COMFORT_SPACE_PX, leftWithPossibleNegative)\n        : leftWithPossibleNegative)\n      : (x - triggerRect.left)) + addedXForPortalPositioning;\n    let top = y - triggerRect.top + addedYForPortalPositioning;\n\n    if (isDense) {\n      left = Math.min(left, rootRect.width - menuRect.width - MENU_POSITION_VISUAL_COMFORT_SPACE_PX);\n      top = Math.min(top, rootRect.height - menuRect.height - MENU_POSITION_VISUAL_COMFORT_SPACE_PX);\n    }\n\n    // Avoid hiding external parts of menus on mobile devices behind the edges of the screen (ReactionSelector for example)\n    const addedXForMenuPositioning = menuElMinWidth ? Math.max(0, (menuElMinWidth - menuElWidth) / 2) : 0;\n    if (left - addedXForMenuPositioning < 0 && shouldAvoidNegativePosition) {\n      left = addedXForMenuPositioning + MENU_POSITION_VISUAL_COMFORT_SPACE_PX;\n    }\n\n    const menuMaxHeight = rootRect.height - MENU_POSITION_BOTTOM_MARGIN - (marginTop || 0);\n\n    setWithScroll(menuMaxHeight < menuRect.height);\n    setMenuStyle(`max-height: ${menuMaxHeight}px;`);\n    setStyle(`left: ${left}px; top: ${top}px`);\n    const offsetX = (anchorX + addedXForPortalPositioning - triggerRect.left) - left;\n    const offsetY = (anchorY + addedYForPortalPositioning - triggerRect.top) - top - (marginTop || 0);\n    setTransformOriginX(horizontalPosition === 'left' ? offsetX : menuRect.width + offsetX);\n    setTransformOriginY(verticalPosition === 'bottom' ? menuRect.height + offsetY : offsetY);\n  }, [\n    anchor, getMenuElement, getRootElement, getTriggerElement, getLayout,\n  ]);\n\n  return {\n    positionX,\n    positionY,\n    transformOriginX,\n    transformOriginY,\n    style,\n    menuStyle,\n    withScroll,\n  };\n}\n","let counter = 0;\n\nexport function disableDirectTextInput() {\n  counter += 1;\n}\n\nexport function enableDirectTextInput() {\n  counter -= 1;\n}\n\nexport function getIsDirectTextInputDisabled() {\n  return counter > 0;\n}\n","import { IS_IOS } from './windowEnvironment';\nimport forceReflow from './forceReflow';\n\nconst resetScroll = (container: HTMLDivElement, scrollTop?: number) => {\n  if (IS_IOS) {\n    container.style.overflow = 'hidden';\n  }\n\n  if (scrollTop !== undefined) {\n    container.scrollTop = scrollTop;\n  }\n\n  if (IS_IOS) {\n    container.style.overflow = '';\n  }\n};\n\n// Workaround for https://bugs.chromium.org/p/chromium/issues/detail?id=1264266\nexport function patchChromiumScroll(element: HTMLElement) {\n  element.style.display = 'none';\n  forceReflow(element);\n  element.style.display = '';\n}\n\nexport default resetScroll;\n","export default function trapFocus(element: HTMLElement) {\n  function handleKeyDown(e: KeyboardEvent) {\n    if (e.key !== 'Tab') {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    const focusableElements = Array.from(\n      element.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'),\n    ) as HTMLElement[];\n    if (!focusableElements.length) {\n      return;\n    }\n\n    const currentFocusedIndex = focusableElements.findIndex((em) => em.isSameNode(document.activeElement));\n    let newFocusedIndex = 0;\n    if (currentFocusedIndex >= 0) {\n      if (e.shiftKey) {\n        newFocusedIndex = currentFocusedIndex > 0\n          ? currentFocusedIndex - 1\n          : focusableElements.length - 1;\n      } else {\n        newFocusedIndex = currentFocusedIndex < focusableElements.length - 1\n          ? currentFocusedIndex + 1\n          : 0;\n      }\n    }\n\n    focusableElements[newFocusedIndex].focus();\n  }\n\n  document.addEventListener('keydown', handleKeyDown, false);\n\n  return () => {\n    document.removeEventListener('keydown', handleKeyDown, false);\n  };\n}\n"],"names":["cn","createClassNameBuilder","media","icon","memo","_ref","className","size","peer","photo","text","isSavedMessages","withVideo","loopIndefinitely","noPersonalPhoto","onClick","ref","useRef","videoLoopCountRef","isPeerChat","user","undefined","chat","isDeleted","isDeletedUser","isReplies","isChatWithRepliesBot","id","isForum","imageHash","videoHash","shouldLoadVideo","isVideo","shouldFetchBig","getChatAvatarHash","imgBlobUrl","useMedia","ApiMediaFormat","videoBlobUrl","hasBlobUrl","Boolean","shouldPlayVideo","transitionClassNames","useMediaTransition","handleVideoEnded","useLastCallback","e","video","currentTarget","current","style","display","lang","useLang","content","author","getUserFullName","getChatTitle","React","buildClassName","role","src","alt","decoding","OptimizedVideo","canPlay","muted","loop","autoPlay","disablePictureInPicture","playsInline","onEnded","userFullName","getFirstLetters","title","isUserId","fullClassName","getUserColorKey","hasMedia","handleClick","handleMouseDown","useFastClick","IS_TEST","onMouseDown","renderText","fakeType","VERIFIED_ICON","__html","VerifiedIcon","dangerouslySetInnerHTML","noVerified","noFake","withEmojiStatus","emojiStatusSize","noLoopLimit","onEmojiStatusClick","observeIntersection","isUser","emojiStatus","isPremium","styles","dir","isVerified","FakeIcon","CustomEmoji","documentId","loopLimit","EMOJI_STATUS_LOOP_LIMIT","observeIntersectionForLoading","PremiumIcon","PREMIUM_ICON","withGradient","big","html","useMemo","generateUniqueId","getPremiumIconGradient","withGlobal","global","_ref2","userId","selectCurrentChat","selectUser","contactName","getUserFirstOrLastName","isOpen","onClose","deleteChatMember","getActions","handleDeleteChatMember","useCallback","chatId","ConfirmDialog","textParts","confirmLabel","confirmHandler","confirmIsDestructive","selectChatGroupCall","fullInfo","selectChatFullInfo","groupCallId","selectGroupCall","groupCalls","byId","selectGroupCallParticipant","participantId","participants","selectIsAdminInActiveGroupCall","selectActiveGroupCall","selectChat","isChatBasicGroup","isCreator","adminRights","manageCall","activeGroupCallId","selectPhoneCallUser","phoneCall","currentUserId","adminId","selectCanInviteToActiveGroupCall","groupCall","getMainUsername","inviteLink","selectCurrentLimit","limit","_limits$limit","appConfig","DEFAULT_LIMITS","selectIsCurrentUserPremium","limits","value","selectPremiumLimit","stopEvent","stopImmediatePropagation","preventDefault","stopPropagation","useContextMenuHandlers","elementRef","isMenuDisabled","shouldDisableOnLink","shouldDisableOnLongTap","isContextMenuOpen","setIsContextMenuOpen","useState","contextMenuPosition","setContextMenuPosition","contextMenuTarget","setContextMenuTarget","handleBeforeContextMenu","button","requestMutation","addExtraClass","target","handleContextMenu","removeExtraClass","matches","x","clientX","y","clientY","handleContextMenuClose","handleContextMenuHide","useEffect","IS_TOUCH_ENV","element","timer","clearLongPressTimer","clearTimeout","startLongPressTimer","window","setTimeout","originalEvent","touches","addEventListener","IS_IOS","IS_PWA","removeEventListener","capture","once","emulateContextMenuEvent","passive","callback","handler","type","MouseButton","getViewportSlice","sourceIds","direction","listSlice","offsetId","length","index","indexOf","indexForDirection","LoadMoreDirection","from","Math","max","to","newViewportIds","slice","areSomeLocal","areAllLocal","newIsOnTop","loadMoreBackwards","listIds","isDisabled","arguments","requestParamsRef","currentStateRef","viewportIds","isOnTop","forceUpdate","useForceUpdate","prevListIds","usePrevious","prevIsDisabled","currentMiddleId","round","defaultOffsetId","includes","areSortedArraysEqual","getMore","noScroll","delay","noFirst","savedCallback","useLayoutEffect","setInterval","clearInterval","useLayoutEffectWithPrevDeps","cb","dependencies","debugKey","prevDepsRef","prevDeps","EMPTY_RECT","width","left","height","top","useMenuPosition","anchor","getTriggerElement","getRootElement","getMenuElement","getLayout","positionX","setPositionX","positionY","setPositionY","transformOriginX","setTransformOriginX","transformOriginY","setTransformOriginY","withScroll","setWithScroll","setStyle","menuStyle","setMenuStyle","triggerEl","anchorX","anchorY","menuEl","rootEl","extraPaddingX","extraTopPadding","marginSides","extraMarginTop","menuElMinWidth","shouldAvoidNegativePosition","withPortal","isDense","marginTop","parseInt","getComputedStyle","offsetWidth","menuElWidth","offsetHeight","menuElHeight","menuRect","rootRect","getBoundingClientRect","horizontalPosition","verticalPosition","triggerRect","addedYForPortalPositioning","addedXForPortalPositioning","leftWithPossibleNegative","min","addedXForMenuPositioning","menuMaxHeight","offsetX","offsetY","counter","disableDirectTextInput","enableDirectTextInput","getIsDirectTextInputDisabled","resetScroll","container","scrollTop","overflow","trapFocus","handleKeyDown","key","focusableElements","Array","querySelectorAll","currentFocusedIndex","findIndex","em","isSameNode","document","activeElement","newFocusedIndex","shiftKey","focus"],"sourceRoot":""}